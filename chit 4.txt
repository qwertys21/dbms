chit 4
CREATE TABLE student(S_ID INT PRIMARY KEY, name VARCHAR(50), dept_name VARCHAR(50), tot_cred INT);
CREATE TABLE instructor(T_ID INT PRIMARY KEY, name VARCHAR(50), dept_name VARCHAR(50), salary DECIMAL(10,2));
CREATE TABLE course(course_id INT PRIMARY KEY, title VARCHAR(100), dept_name VARCHAR(50), credits INT);

-- sample inserts omitted for brevity; add as needed.

-- i. Average salary of instructors in departments where average > 42000
SELECT dept_name, AVG(salary) AS avg_sal
FROM instructor
GROUP BY dept_name
HAVING AVG(salary) > 42000;

-- ii. Increase salary of each instructor in 'computer' dept by 10%
UPDATE instructor SET salary = salary * 1.10 WHERE LOWER(dept_name) = 'computer';

-- iii. Names of instructors whose names are neither 'Amol' nor 'Amit'
SELECT name FROM instructor WHERE name NOT IN ('Amol','Amit');

-- iv. Names of students which contains 'am' as substring (case-insensitive)
SELECT name FROM student WHERE LOWER(name) LIKE '%am%';

-- v. Name of students from computer dept that take 'DBMS' courses
-- Assuming a registration table: takes(S_ID, course_id)
-- Create sample takes table:
CREATE TABLE takes(S_ID INT, course_id INT, PRIMARY KEY(S_ID,course_id));
-- Query:
SELECT DISTINCT s.name
FROM student s
JOIN takes t ON s.S_ID = t.S_ID
JOIN course c ON t.course_id = c.course_id
WHERE LOWER(s.dept_name) = 'computer' AND LOWER(c.title) LIKE '%dbms%';
